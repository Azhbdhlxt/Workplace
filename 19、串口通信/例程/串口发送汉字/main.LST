C51 COMPILER V9.00   MAIN                                                                  02/23/2018 17:01:33 PAGE 1   


C51 COMPILER V9.00, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN main.OBJ
COMPILER INVOKED BY: C:\Keil\C51\BIN\C51.EXE main.c BROWSE DEBUG OBJECTEXTEND

line level    source

   1          /*********************************************************************************
   2          * 【作    者】：        清翔电子:向量
   3          * 【版    本】：        V1.0
   4          * 【网    站】：        http://www.qxmcu.com/ 
   5          * 【淘宝店铺】：        http://qxmcu.taobao.com/
   6          * 【实验平台】：        清翔 QX-MCS51 单片机开发板
   7          * 【外部晶振】：        11.0592mhz      
   8          * 【主控芯片】：        STC89C52
   9          * 【编译环境】：        Keil μVisio4   
  10          * 【程序功能】：        串口工作方式1,8位UART比特率9600。发送“大家好！欢迎学习单片机”                                                                   
             -  
  11          * 【使用说明】：        打开串口助手（STC-ISP软件上有集成）选择对应COM号，设置波特率9600
  12                                                  接收格式选择【文本格式】。
  13          **********************************************************************************/
  14          #include <reg52.h>
  15          #include <stdio.h>
  16          
  17          #define uint unsigned int
  18          #define uchar unsigned char
  19          
  20          //毫秒级延时函数定义
  21          void delay(uint z)
  22          {
  23   1              uint x,y;
  24   1              for(x = z; x > 0; x--)
  25   1                      for(y = 114; y > 0 ; y--);              
  26   1      } 
  27          
  28          //串口初始化
  29          void UARTInit()
  30          {
  31   1              SM0 = 0;        SM1 = 1;//串口工作方式1,8位UART波特率可变
  32   1              TR1 = 1;//启动定时器1
  33   1              TMOD |= 0x20;//定时器1，工作模式2 8位自动重装
  34   1              TH1 = 0xfd;
  35   1              TL1 = 0xfd;//设置比特率9600
  36   1      }
  37          
  38          void main()
  39          {
  40   1              UARTInit(); //串口初始化
  41   1              while(1)
  42   1              {
  43   2                      TI = 1;
  44   2                      puts("大家好！欢迎学习单片机");
  45   2                      while(!TI);
  46   2                      TI = 0;
  47   2                      delay(1000);
  48   2              }       
  49   1      }
  50          /*************************************
  51          备注：
  52          使用printf()puts()前都应软件置位TI = 1；
  53          printf()puts()  使用putchar函数发送字节
  54          
C51 COMPILER V9.00   MAIN                                                                  02/23/2018 17:01:33 PAGE 2   

  55          void putchar(uchar sbyte )
  56          {
  57              while(！TI);   //等待发送完
  58          
  59              SBUF=sbyte;
  60          
  61          }
  62          
  63          所以第一次调用putchar前没TI=1 永远等待
  64          *************************************/


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =     74    ----
   CONSTANT SIZE    =     23    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
